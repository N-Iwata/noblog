---
title: ã€GatsbyJSã€‘ãƒ–ãƒ­ã‚°ã®è¨˜äº‹ã®ãƒˆãƒƒãƒ—ç”»åƒã¨è¨˜äº‹ä¸€è¦§ã®ã‚µãƒ ãƒã‚¤ãƒ«ç”»åƒã‚’è¿½åŠ ã—ãŸ
date: "2020-05-10"
description: ä»Šå›ã¯GatsbyJSãƒ–ãƒ­ã‚°ã®è¨˜äº‹ãƒšãƒ¼ã‚¸ã«ãƒ’ãƒ¼ãƒ­ãƒ¼ç”»åƒã‚’ã¤ã‘ã¦ã€è¨˜äº‹ä¸€è¦§ã«ã‚‚ã‚µãƒ ãƒã‚¤ãƒ«ã¨ã—ã¦ç”»åƒã‚’è¡¨ç¤ºã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚è¨˜äº‹ã®ãƒˆãƒƒãƒ—ã‚„ä¸€è¦§ã®ã‚µãƒ ãƒã‚¤ãƒ«ã«ç”»åƒãŒã‚ã‚‹ã ã‘ã§ã€å°è±¡ãŒå¤‰ã‚ã‚Šã¾ã™ã‹ã‚‰ã­ã€‚
slug: 2020-05-10/gatsby-hero
tags: [GatsbyJS, gatsby-starter-blog]
hero: ./hero.png
---

## ã¯ã˜ã‚ã«

ãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™ï¼ã“ã‚“ã«ã¡ã¯ï¼ã“ã‚“ã°ã‚“ã¯ï¼<br>
éº»é›€ã¨èŠç”Ÿå¤§å¥½ããŠã˜ã•ã‚“ã“ã¨**ã®ãµã®ãµ**(@rpf_nob)ã§ã™ï¼ï¼

ä»Šå›ã¯ GatsbyJS ãƒ–ãƒ­ã‚°ã®è¨˜äº‹ãƒšãƒ¼ã‚¸ã«ãƒ’ãƒ¼ãƒ­ãƒ¼ç”»åƒã‚’ã¤ã‘ã¦ã€è¨˜äº‹ä¸€è¦§ã«ã‚‚ã‚µãƒ ãƒã‚¤ãƒ«ã¨ã—ã¦ç”»åƒã‚’è¡¨ç¤ºã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚<br>
è¨˜äº‹ã®ãƒˆãƒƒãƒ—ã‚„ä¸€è¦§ã®ã‚µãƒ ãƒã‚¤ãƒ«ã«ç”»åƒãŒã‚ã‚‹ã ã‘ã§ã€å°è±¡ãŒå¤‰ã‚ã‚Šã¾ã™ã‹ã‚‰ã­ã€‚

## å‰æ

ã“ã®ãƒ–ãƒ­ã‚°ã¯ GatsbyJS ã®[gatsby-starter-blog](https://www.gatsbyjs.org/starters/gatsbyjs/gatsby-starter-blog/)ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‹ã‚‰ä½œæˆã—ã¦ã„ã¾ã™ã€‚

<div class="iframely-embed"><div class="iframely-responsive" style="height: 140px; padding-bottom: 0;"><a href="https://www.gatsbyjs.org/starters/gatsbyjs/gatsby-starter-blog/" data-iframely-url="//cdn.iframe.ly/qjUJkBu?iframe=card-small"></a></div></div>

<br/>

ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¯ã“ã¡ã‚‰ï¼ˆå‚è€ƒã«ãªã£ãŸã¨ã„ã†æ–¹ã¯ â­ï¸ ã‚’ãƒãƒãƒƒã¨æŠ¼ã—ã¦ã„ãŸã ã‘ã‚‹ã¨å¬‰ã—ã„ã§ã™ã€œ ğŸ™‡â€â™‚ï¸ï¼‰

<div class="iframely-embed"><div class="iframely-responsive" style="height: 140px; padding-bottom: 0;"><a href="https://github.com/N-Iwata/noblog" data-iframely-url="//cdn.iframe.ly/Q4tAo8y?card=small"></a></div></div>

## ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

ä»¥ä¸‹ã‚³ãƒãƒ³ãƒ‰ã§[gatsby-image]ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚<br>

[å…¬å¼ã‚µã‚¤ãƒˆ](https://www.gatsbyjs.org/docs/gatsby-image/)ã«ã‚ˆã‚‹ã¨[gatsby-image]ã¯ã€GraphQL ã¨[gatsby-plugin-sharp]ãŒæä¾›ã™ã‚‹ Gatsby ã®ãƒã‚¤ãƒ†ã‚£ãƒ–ç”»åƒå‡¦ç†æ©Ÿèƒ½ã¨ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ã«é€£æºã—ã¦ã€ã‚µã‚¤ãƒˆã®ç”»åƒèª­ã¿è¾¼ã¿ã‚’ç°¡å˜ã‹ã¤å®Œå…¨ã«æœ€é©åŒ–ã™ã‚‹ã‚ˆã†ã«è¨­è¨ˆã•ã‚ŒãŸ React ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã™ã€‚

[gatsby-plugin-sharp]ã¨[gatsby-transformer-sharp]ã‚‚å¿…è¦ãªã®ã§ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ãªã‹ã£ãŸã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„ã€‚<br>
ä»Šå›ã¯ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ãŸã®ã§ã€çœç•¥ã—ã¦ã„ã¾ã™ã€‚

```
npm install --save gatsby-image
```

## è¨˜äº‹ã®ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã«ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚’è¿½åŠ ã™ã‚‹

å„è¨˜äº‹ã®ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸Šéƒ¨ã®ãƒ¡ã‚¿æƒ…å ±ã®éƒ¨åˆ†ã«[hero]ã‚’è¿½åŠ ã—ã€èª­ã¿è¾¼ã¿ãŸã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã—ã¾ã™ã€‚
ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã¨åŒã˜ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç½®ã„ã¦ã„ã¾ã™ã€‚

```markdown{7}:title=markdown
---
title: GatsbyJSãƒ–ãƒ­ã‚°ã®è¨˜äº‹ã®ãƒˆãƒƒãƒ—ç”»åƒã¨è¨˜äº‹ä¸€è¦§ã®ã‚µãƒ ãƒã‚¤ãƒ«ç”»åƒã‚’è¿½åŠ ã—ãŸ
date: "2020-05-10"
description: ä»Šå›ã¯GatsbyJSãƒ–ãƒ­ã‚°ã®è¨˜äº‹ãƒšãƒ¼ã‚¸ã«ãƒ’ãƒ¼ãƒ­ãƒ¼ç”»åƒã‚’ã¤ã‘ã¦ã€è¨˜äº‹ä¸€è¦§ã«ã‚‚ã‚µãƒ ãƒã‚¤ãƒ«ã¨ã—ã¦ç”»åƒã‚’è¡¨ç¤ºã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚è¨˜äº‹ã®ãƒˆãƒƒãƒ—ã‚„ä¸€è¦§ã®ã‚µãƒ ãƒã‚¤ãƒ«ã«ç”»åƒãŒã‚ã‚‹ã ã‘ã§ã€å°è±¡ãŒå¤‰ã‚ã‚Šã¾ã™ã‹ã‚‰ã­ã€‚
slug: 2020-05-10/gatsby-hero
tags: [GatsbyJS, gatsby-starter-blog, gatsby-image]
hero: ./hero.png
---
```

## è¨˜äº‹ã«ãƒ’ãƒ¼ãƒ­ãƒ¼ç”»åƒã‚’è¿½åŠ ã™ã‚‹

### GraphQL ã®ã‚¯ã‚¨ãƒªè¿½åŠ 

[src/templates/blogposts/index.jsx]ã« GraphQL ã®ã‚¯ã‚¨ãƒªã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«è¿½åŠ ã—ã¾ã™ã€‚<br>
hero ã§æŒ‡å®šã—ãŸç”»åƒã‚’[fluid]ã§æŠ½å‡ºã™ã‚‹ã“ã¨ã§ã€ç”»åƒã®ã‚µã‚¤ã‚ºã‚’æœ€é©åŒ–ï¼ˆsrcsetï¼‰ã§ãã‚‹ã‚ˆã†ã«ã—ã¦ãã‚Œã¾ã™ã€‚

```js{9-15}:title=src/templates/blogposts/index.jsx
export const pageQuery = graphql`
  query BlogPostBySlug($slug: String!) {
    ãƒ»ãƒ»ãƒ»çœç•¥
    markdownRemark(fields: { slug: { eq: $slug } }) {
      ãƒ»ãƒ»ãƒ»çœç•¥
      frontmatter {
        title
        ãƒ»ãƒ»ãƒ»çœç•¥
        hero {
          childImageSharp {
            fluid(maxWidth: 1280) {
              ...GatsbyImageSharpFluid
            }
          }
        }
      }
    }
  }
`;
```

### BlogPostTemplate ã«æŠ½å‡ºã—ãŸç”»åƒã‚’æŒ¿å…¥

ã¾ãšã€[gatsby-image]ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã™ã€‚

```js:title=src/templates/blogposts/index.jsx
import Image from "gatsby-image";
```

æ¬¡ã«ã€ç”»åƒã‚’æŒ¿å…¥ã—ãŸã„å ´æ‰€ã«ä»¥ä¸‹ã‚’è¿½è¨˜ã—ã¾ã™ã€‚<br>
ä»Šå›ã¯ã‚¿ã‚°ã®ä¸‹ã«æŒ¿å…¥ã—ã¦ã„ã¾ã™ã€‚

```js:title=src/templates/blogposts/index.jsx
<Image fluid={data.markdownRemark.frontmatter.hero.childImageSharp.fluid} />
```

ã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«æŒ¿å…¥ã•ã‚Œã¾ã™ã€‚

![img](img1.png)

## è¨˜äº‹ä¸€è¦§ã«ã‚µãƒ ãƒã‚¤ãƒ«ç”»åƒã‚’è¿½åŠ ã™ã‚‹

åŸºæœ¬çš„ã«ã¯ãƒ’ãƒ¼ãƒ­ãƒ¼è¿½åŠ ã¨åŒã˜ã§ã™ã€‚

### GraphQL ã®ã‚¯ã‚¨ãƒªè¿½åŠ 

[src/pages/index.js]ã« GraphQL ã®ã‚¯ã‚¨ãƒªã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«è¿½åŠ ã—ã¾ã™ã€‚<br>
ã‚µãƒ ãƒã‚¤ãƒ«ã§ã‚‚[fluid]ã§æŠ½å‡ºã—ã¾ã™ã€‚

```js{11-17}:title=src/pages/index.js
export const pageQuery = graphql`
  query {
    ãƒ»ãƒ»ãƒ»çœç•¥
    allMarkdownRemark(sort: { fields: [frontmatter___date], order: DESC }) {
      edges {
        node {
          ãƒ»ãƒ»ãƒ»çœç•¥
          frontmatter {
            date(formatString: "YYYY-MM-DD")
            ãƒ»ãƒ»ãƒ»çœç•¥
            hero {
              childImageSharp {
                fluid(maxWidth: 1280) {
                  ...GatsbyImageSharpFluid
                }
              }
            }
          }
        }
      }
    }
  }
`;
```

### BlogIndex ã«æŠ½å‡ºã—ãŸç”»åƒã‚’æŒ¿å…¥

ã¾ãšã€[gatsby-image]ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã™ã€‚

```js:title=src/pages/index.js
import Image from "gatsby-image";
```

æ¬¡ã«ã€ç”»åƒã‚’æŒ¿å…¥ã—ãŸã„å ´æ‰€ã«ä»¥ä¸‹ã‚’è¿½è¨˜ã—ã¾ã™ã€‚<br>
ä»Šå›ã¯æ—¥ä»˜ã®ä¸‹ã«æŒ¿å…¥ã—ã¦ã„ã¾ã™ã€‚ã¾ãŸã€ç”»åƒã‚¯ãƒªãƒƒã‚¯ã§ã‚‚ãƒšãƒ¼ã‚¸é·ç§»ã—ãŸã„ã®ã§ã€[Link to]ã‚’è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚

```js{27-32}:title=src/pages/index.js
const BlogIndex = ({ data, location }) => {
  const siteTitle = data.site.siteMetadata.title;
  const author = data.site.siteMetadata.author.name;
  const posts = data.allMarkdownRemark.edges;

  return (
    <div>
      <Layout location={location} title={siteTitle} author={author}>
        <SEO title="All posts" />
        <Bio />
        {posts.map(({ node }) => {
          const title = node.frontmatter.title || node.fields.slug;
          return (
            <div className="posts">
              <article key={node.fields.slug}>
                <header>
                  <h3 className="posts__title">
                    <Link className="posts__title__a" to={node.frontmatter.slug}>
                      {title}
                    </Link>
                  </h3>
                  <small className="posts__date">{node.frontmatter.date}</small>
                </header>
                <div className="posts__image_container">
                  <Link to={node.frontmatter.slug}>
                    <Image
                      className="posts__image"
                      fluid={node.frontmatter.hero.childImageSharp.fluid}
                    />
                  </Link>
                </div>

                <section>
                  <p
                    className="posts__desc"
                    dangerouslySetInnerHTML={{
                      __html: node.frontmatter.description || node.excerpt,
                    }}
                  />
                  <div className="posts_more">
                    <Link className="posts__more__a" to={node.frontmatter.slug}>
                      ç¶šãã‚’èª­ã‚€
                    </Link>
                  </div>
                </section>
              </article>
            </div>
          );
        })}
      </Layout>
    </div>
  );
};
```

### ã‚¹ã‚¿ã‚¤ãƒ«èª¿æ•´

ä»Šå›ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚¹ã‚¿ã‚¤ãƒ«èª¿æ•´ã—ã¦ã„ã¾ã™ã€‚

```scss
.posts {
  border: 2px dotted #eee;
  border-radius: 20px;
  padding: 20px;
  margin-bottom: 10px;

  &__title {
    margin: 0;
    margin-bottom: 5px;
    font-size: 1.6em;

    &__a {
      box-shadow: none;
    }
  }
  &__image_container {
    position: relative;
    overflow: hidden;
    border: 1px solid #eee;
  }
  &__image {
    margin-bottom: 5px;
    transition: all ease-in 0.5s;
    position: absolute;
    overflow: hidden;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;

    &:hover {
      transform: scale(1.1);
      overflow: hidden;
    }
  }

  &__desc {
    margin-bottom: 5px;
  }
  &__more {
    &__a {
      display: block;
      text-align: right;
      box-shadow: none;
    }
  }
}

.blog__hero {
  border: 1px solid #eee;
  margin-bottom: 5px;
}
```

ã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«æŒ¿å…¥ã•ã‚Œã¾ã™ã€‚

![img](img2.png)

## ã¾ã¨ã‚

ä»Šå›ã¯ GatsbyJS ãƒ–ãƒ­ã‚°ã®è¨˜äº‹ãƒšãƒ¼ã‚¸ã«ãƒ’ãƒ¼ãƒ­ãƒ¼ç”»åƒã‚’ã¤ã‘ã¦ã€è¨˜äº‹ä¸€è¦§ã«ã‚‚ã‚µãƒ ãƒã‚¤ãƒ«ã¨ã—ã¦ç”»åƒã‚’è¡¨ç¤ºã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚

ã‹ãªã‚Šå°è±¡ãŒå¤‰ã‚ã‚Šã¾ã—ãŸã­ï¼ï¼

ä»–ã«ã‚‚ GatsbyJS ã®ãƒ–ãƒ­ã‚°ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚’ã„ã‚ã„ã‚ã‚„ã£ã¦ã„ã‚‹ã®ã§ã€ä»¥ä¸‹ã‚‚ã‚ã‚ã›ã¦ã”è¦§ã„ãŸã ã‘ã‚Œã°ã¨æ€ã„ã¾ã™ã€‚

<div class="iframely-embed"><div class="iframely-responsive" style="height: 140px; padding-bottom: 0;"><a href="https://rpf-noblog.com/tags/gatsby-js/" data-iframely-url="//cdn.iframe.ly/5j7eIPT"></a></div></div>

<br>
<br>

æœ€å¾Œã¾ã§è¦‹ã¦ã„ãŸã ãã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼ï¼
